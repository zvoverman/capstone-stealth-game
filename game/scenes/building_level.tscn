[gd_scene load_steps=8 format=3 uid="uid://dgx71v3n0qufj"]

[ext_resource type="PackedScene" uid="uid://bapg7j4qlh4ec" path="res://enemy/enemy.tscn" id="1_6yj2v"]
[ext_resource type="PackedScene" uid="uid://1ho3oqfnll2i" path="res://player/player_drone.tscn" id="1_vpr45"]
[ext_resource type="PackedScene" uid="uid://d3nuk5n1cvyjr" path="res://camera_scanner/camera.tscn" id="2_qg52e"]
[ext_resource type="PackedScene" uid="uid://bb17e3w1o28gd" path="res://detection_bar.tscn" id="3_v8uer"]
[ext_resource type="Script" path="res://scenes/game_manager.gd" id="4_4v10i"]

[sub_resource type="NavigationMesh" id="NavigationMesh_1hnkd"]
vertices = PackedVector3Array(-4.55, 0.45, -47.1177, -4.55, 0.45, 1.8823, 4.45, 0.45, 1.8823, 4.45, 0.45, -47.1177, -4.55, 10.45, -24.6177, -4.55, 10.45, -15.3677, 4.45, 10.45, -15.3677, 4.45, 10.45, -24.6177)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1), PackedInt32Array(7, 6, 4), PackedInt32Array(4, 6, 5)]

[sub_resource type="Environment" id="Environment_wgbtv"]
background_mode = 1
background_color = Color(0.286102, 0.381981, 0.488281, 1)
tonemap_mode = 2
ssr_enabled = true
ssao_enabled = true
ssil_enabled = true
fog_enabled = true
fog_mode = 1
fog_light_color = Color(0.286275, 0.380392, 0.490196, 1)
fog_density = 0.1
fog_depth_begin = 1.0
fog_depth_end = 10.0
volumetric_fog_enabled = true
volumetric_fog_emission = Color(0.286275, 0.380392, 0.490196, 1)

[node name="BuildingLevel" type="Node3D"]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0)
navigation_mesh = SubResource("NavigationMesh_1hnkd")

[node name="Environment" type="Node3D" parent="NavigationRegion3D"]
transform = Transform3D(1, -1.11759e-08, 1.49012e-08, 0, 1, 0, 1.49012e-08, 2.98023e-08, 1, 0, 0, 0)

[node name="CSGBox3D" type="CSGBox3D" parent="NavigationRegion3D/Environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -22.6177)
use_collision = true
size = Vector3(10, 0.1, 50)

[node name="CSGBox3D2" type="CSGBox3D" parent="NavigationRegion3D/Environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 5, -20)
use_collision = true
size = Vector3(0.1, 10, 25)

[node name="CSGBox3D3" type="CSGBox3D" parent="NavigationRegion3D/Environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 9.95851, -20)
use_collision = true
size = Vector3(10, 0.1, 10)

[node name="Enemy" parent="." node_paths=PackedStringArray("player", "patrol_points") instance=ExtResource("1_6yj2v")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.57355, -34.9071)
player = NodePath("../PlayerDrone")
patrol_points = [NodePath("Marker3D"), NodePath("Marker3D2")]

[node name="Camera" parent="Enemy" node_paths=PackedStringArray("player", "game_manager") instance=ExtResource("2_qg52e")]
transform = Transform3D(1, 0, 0, 0, 0.866897, 0.498488, 0, -0.498488, 0.866897, 0, 1.27622, -0.21891)
radius = 5.0
player = NodePath("../../PlayerDrone")
game_manager = NodePath("../../GameManager")

[node name="Marker3D" type="Marker3D" parent="Enemy"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.57355, -21.3698)
top_level = true

[node name="Marker3D2" type="Marker3D" parent="Enemy"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.57355, -38.2866)
top_level = true

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.766044, -0.55667, 0.321394, 0, 0.5, 0.866025, -0.642788, -0.663414, 0.383022, 0, 5, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_wgbtv")

[node name="PlayerDrone" parent="." node_paths=PackedStringArray("detection_bar_ui") instance=ExtResource("1_vpr45")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.09365, 0)
detection_bar_ui = NodePath("../CanvasLayer/ProgressBar")

[node name="Camera" parent="." node_paths=PackedStringArray("markers", "player", "game_manager") instance=ExtResource("2_qg52e")]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 0.999999, 0, -0.999999, -4.37114e-08, 0, 9.0663, -17.962)
radius = 5.0
markers = [NodePath("Marker3D"), NodePath("Marker3D2"), NodePath("Marker3D3")]
player = NodePath("../PlayerDrone")
game_manager = NodePath("../GameManager")

[node name="Marker3D" type="Marker3D" parent="Camera"]
transform = Transform3D(1, 0, 0, 0, 0.664513, 0.747276, 0, -0.747276, 0.664513, 3, 0.257907, -10.7119)
top_level = true

[node name="Marker3D2" type="Marker3D" parent="Camera"]
transform = Transform3D(1, 0, 0, 0, 0.664513, 0.747276, 0, -0.747276, 0.664513, -2.92959, 0.217979, -19.4542)
top_level = true

[node name="Marker3D3" type="Marker3D" parent="Camera"]
transform = Transform3D(1, 0, 0, 0, 0.664513, 0.747276, 0, -0.747276, 0.664513, -1.22174, 0.397861, -25.4667)
top_level = true

[node name="Camera2" parent="." node_paths=PackedStringArray("markers", "player", "game_manager") instance=ExtResource("2_qg52e")]
transform = Transform3D(1, 0, 0, 0, 0.086356, 0.996264, 0, -0.996264, 0.086356, 3.62313, 9.25521, -23.2651)
markers = [NodePath("Marker3D"), NodePath("Marker3D2"), NodePath("Marker3D3")]
player = NodePath("../PlayerDrone")
game_manager = NodePath("../GameManager")

[node name="Marker3D" type="Marker3D" parent="Camera2"]
transform = Transform3D(1, 0, 0, 0, 0.664513, 0.747276, 0, -0.747276, 0.664513, 3.5783, 0.257907, -24.3062)
top_level = true

[node name="Marker3D2" type="Marker3D" parent="Camera2"]
transform = Transform3D(1, 0, 0, 0, 0.664513, 0.747276, 0, -0.747276, 0.664513, -4.92959, 4.21798, -18.5843)
top_level = true

[node name="Marker3D3" type="Marker3D" parent="Camera2"]
transform = Transform3D(1, 0, 0, 0, 0.664513, 0.747276, 0, -0.747276, 0.664513, -4.22174, 0.397861, -28.5968)
top_level = true

[node name="CanvasLayer" parent="." instance=ExtResource("3_v8uer")]

[node name="GameManager" type="Node" parent="." node_paths=PackedStringArray("player")]
script = ExtResource("4_4v10i")
player = NodePath("../PlayerDrone")

[editable path="CanvasLayer"]
